get:
  summary: List all webhooks
  description: Retrieves all webhooks for the current tenant
  operationId: listWebhooks
  tags:
    - Webhooks
  responses:
    '200':
      description: OK
      content:
        application/json:
          schema:
            required:
              - data
            properties:
              data:
                type: array
                items:
                  $ref: ../components/schemas/Webhook.yaml
    '401':
      $ref: ../components/responses/Unauthorized.yaml
    '429':
      $ref: ../components/responses/TooManyAttempts.yaml
    '500':
      $ref: ../components/responses/InternalServerError.yaml

post:
  summary: Add a webhook
  description: Add a new webhook endpoint to be called when specific events happen
  operationId: addWebhook
  tags:
    - Webhooks
  requestBody:
    required: true
    content:
      application/json:
        schema:
          type: object
          required:
            - name
            - url
            - events
          properties:
            name:
              type: string
              description: Name of the webhook
              example: Zapier booking notifications
            url:
              type: string
              format: uri
              description: URL (endpoint) that will be called when one of the webhook's events occur.
              example: https://example.com/webhooks/letsbook
            events:
              $ref: ../components/parameters/webhookEvent.yaml
            tenantIds:
              type: array
              minItems: 1
              items:
                type: string
              description: By default, you will receive updates on events of all tenants your API key has access to when creating this webhook. You can provide an explicit list of tenant IDs this webhook applies to.
              example:
                - 8d159bbe-f6bc-4ddd-8c9a-6091d7ebd278
  responses:
    '200':
      description: OK
      content:
        application/json:
          schema:
            type: object
            required:
              - data
            properties:
              data:
                $ref: ../components/schemas/Webhook.yaml
    '401':
      $ref: ../components/responses/Unauthorized.yaml
    '422':
      $ref: ../components/responses/WebhookValidationError.yaml
    '429':
      $ref: ../components/responses/TooManyAttempts.yaml
    '500':
      $ref: ../components/responses/InternalServerError.yaml
